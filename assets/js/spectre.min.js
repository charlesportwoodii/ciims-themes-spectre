var SpectreTheme={endPoint:$("#endpoint").attr("data-attr-endpoint")+"/",Blog:{loadDisqusCommentCount:function(t){disqus_shortname=t,function(){var t=document.createElement("script");t.async=!0,t.type="text/javascript",t.src="//"+disqus_shortname+".disqus.com/count.js",(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(t)}()},loadDisqus:function(t,e,n,o){disqus_shortname=t,disqus_identifier=e,disqus_title=n,disqus_url=window.location.origin+"/"+o,function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}(),SpectreTheme.Blog.loadDisqusCommentCount(t)},commentBox:function(){SpectreTheme.endPoint=$("#endpoint").attr("data-attr-endpoint")+"/",$("#b").click(function(){$(this).html(""),$("#a").slideDown("fast"),$("#submit-comment").show(),setTimeout(function(){$("#textbox").focus()},100)}),$("#textbox").keydown(function(){""!=$(this).text()?$("#submit-comment").css("background","#3b9000"):$("#submit-comment").css("background","#9eca80")}),$("#close").click(function(){$("#b").html("Comment on this post"),$("#textbox").html(""),$("#a").slideUp("fast"),$("#submit-comment").hide()}),$("#submit-comment").click(function(t){t.preventDefault(),""!=$("#textbox").text()&&($("#submit-comment").attr("disabled","disabled"),$("#submit-comment i").show(),$.post(SpectreTheme.endPoint+"/comment/comment",{Comments:{comment:$("#textbox").html(),content_id:$(".content.no-padding").attr("data-attr-id")}},function(t){$("#submit-comment i").hide(),$("#textbox").text(""),$("#comment-container").prepend(t),$("div#comment-container").children(":first").fadeIn(),$("#close").click(),$("#submit-comment").removeAttr("disabled"),$(".comment-count").text(parseInt($(".comment-count").text().replace(" Comment","").replace(" Comments",""))+1+" Comments")}))})},getComments:function(t){$.post(SpectreTheme.endPoint+"/comment/getComments/id/"+t,function(t){$("#comment-container").html(t),$(".comment").show(),$("#comment-container").fadeIn(),$(".rounded-img").load(function(){$(this).wrap(function(){return'<span class="'+$(this).attr("class")+'" style="background:url('+$(this).attr("src")+") no-repeat center center; width: "+$(this).width()+"px; height: "+$(this).height()+'px;" />'}),$(this).css("opacity","0")}),$("[class ^='flag']").click(function(){if(!$(this).hasClass("flagged")){var t=$(this);$.post("comment/flag/id/"+$(this).attr("data-attr-id"),function(){$(t).addClass("flagged").text("flagged")})}}),$("[class ^='reply']").click(function(){$(this).parent().parent().parent().find("#comment-form").slideToggle(200)})})},likeBox:function(t){$("[id ^='upvote']").click(function(e){return e.preventDefault(),$.post(SpectreTheme.endPoint+"/content/like/id/"+t,function(t){if(void 0==t.status&&(window.location="' . $this->createUrl('/login') . '"),"success"==t.status){var e=parseInt($("#like-count").text());"inc"==t.type?$("[id ^='like-count']").text(e+1).parent().parent().parent().addClass("liked"):$("[id ^='like-count']").text(e-1).parent().parent().parent().removeClass("liked")}}),!1})},marked:function(){marked.setOptions({gfm:!0,highlight:function(t,e){return hljs.highlightAuto(t,e).value},tables:!0,breaks:!0,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!0,langPrefix:"lang-"});var t=marked($("#markdown").val());$("#md-output").html(t),$("#md-output a").attr("rel","nofollow").attr("target","_blank")}},infScroll:function(t){var e=t.options.path.join(t.options.state.currPage);analytics.pageview(e)},load:function(){SpectreTheme.endPoint=$("#endpoint").attr("data-attr-endpoint")},loadAll:function(){SpectreTheme.endPoint=$("#endpoint").attr("data-attr-endpoint"),$(window).unbind(".infscr")},loadBlog:function(t){SpectreTheme.endPoint=$("#endpoint").attr("data-attr-endpoint"),$(".comments").hasClass("disqus")||SpectreTheme.Blog.getComments(t),SpectreTheme.Blog.marked(),SpectreTheme.Blog.commentBox(),SpectreTheme.Blog.likeBox(t)},loadComment:function(t){SpectreTheme.endPoint=$("#endpoint").attr("data-attr-endpoint"),$(".timeago").timeago(),$("#b-"+t).click(function(){$(this).html(""),$("#a-"+t).slideDown("fast"),$("#submit-comment-"+t).show(),setTimeout(function(){$("#textbox-"+t).focus()},100)}),$("#textbox-"+t).keydown(function(){""!=$(this).text()?$("#submit-comment-"+t).css("background","#3b9000"):$("#submit-comment-"+t).css("background","#9eca80")}),$("#close-"+t).click(function(){$("#b-"+t).html("Comment on this post"),$("#textbox-"+t).html(""),$("#a-"+t).slideUp("fast"),$("#submit-comment-"+t).hide()}),$("#submit-comment-"+t).click(function(e){var n=$(this).attr("id").replace("submit-comment-","");e.preventDefault(),""!=$("#textbox-"+t).text()&&($("#submit-comment-"+t).attr("disabled","disabled"),$("#submit-comment-"+t+" i").show(),$.post(SpectreTheme.endPoint+"/comment/comment",{Comments:{comment:$("#textbox-"+t).html(),content_id:$(".content.no-padding").attr("data-attr-id"),parent_id:n}},function(e,o,s){$("#submit-comment-"+t+" i").hide(),$("#textbox-"+t).text("");var a=s.getResponseHeader("X-Attribute-Id");$(".comment-"+n).append(e),$(".comment-"+a).fadeIn(),$("#close-"+t).click(),$("#submit-comment-"+t).removeAttr("disabled"),$(".comment-count").text(parseInt($(".comment-count").text().replace(" Comment","").replace(" Comments",""))+1+" Comments")}))})},loadRegister:function(){SpectreTheme.endPoint=$("#endpoint").attr("data-attr-endpoint"),void 0!=$("#password").val()&&$("#password").val().length>0&&setTimeout(function(){$("#password, #password2").keyup()},200),$("#password, #password2").keyup(function(){var t="password"==$(this).attr("id")?"password_strength_1":"password_strength_2",e=zxcvbn($(this).val()).score;(1>=e||8>=$(this).val().length)&&$("#"+t).find(".password_strength").removeClass("great").removeClass("good").removeClass("poor").css("width","25%"),2==e?$("#"+t).find(".password_strength").removeClass("great").removeClass("good").removeClass("poor").addClass("poor").css("width","50%"):3==e?$("#"+t).find(".password_strength").removeClass("great").removeClass("good").removeClass("poor").addClass("good").css("width","75%"):4==e?$("#"+t).find(".password_strength").removeClass("great").removeClass("good").removeClass("poor").addClass("great").css("width","100%"):$("#"+t).find(".password_strength").removeClass("great").removeClass("good").removeClass("poor").css("width","25%")}),$("form").submit(function(t){return $("#jsAlert").hide(),8>$("#password").val().length?($("#jsAlertContent").text("Your password must be at least 8 characters.").parent().slideDown(),t.preventDefault(),!1):$("#password2").val()!=$("#password").val()?($("#jsAlertContent").text("Your passwords do not match!").parent().slideDown(),t.preventDefault(),!1):!0})}};